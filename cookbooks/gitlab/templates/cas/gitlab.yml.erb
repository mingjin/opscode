# Generated by Chef for <%= @fqdn %>
# Local modifications will be overwritten.

# Gitlab application config file

# Web application specific settings
web:
  host: <%= @fqdn %>
  port: <%= @https_boolean ? 443 : 80 %>
  https: <%= @https_boolean %>

# Email used for notification
# about new issues, comments
email:
  from: gitlab@<%= @fqdn %> 
  host: <%= @fqdn %> 

  # Protocol used for links in email letters
  # Value can be http or https
  protocol: <%= @https_boolean ? "https" : "http" %>

# Application specific settings
# Like default project limit for user etc
app:
  default_projects_limit: 10
  # backup_path: "/vol/backups"   # default: Rails.root + backups/
  # backup_keep_time: 604800      # default: 0 (forever) (in seconds)

#
# 2. Auth settings
# ==========================
omniauth:
  # Enable ability for users
  # to login via twitter, google ..
  enabled: true

  # IMPORTANT!.
  # It allows user to login without having user account
  allow_single_sign_on: false
  block_auto_created_users: true

  # Auth providers.
  providers:
    # - { name: 'google_oauth2', app_id: 'YOUR APP ID',
    #     app_secret: 'YOUR APP SECRET',
    #     args: { access_type: 'offline', approval_prompt: '' } }
    # - { name: 'twitter', app_id: 'YOUR APP ID',
    #     app_secret: 'YOUR APP SECRET'}
    # - { name: 'github', app_id: 'YOUR APP ID',
    #     app_secret: 'YOUR APP SECRET' }
    - { name: 'cas', args: { host: 'cas.thoughtworks.com', ssl: true, login_url: '/cas/login', logout_url: '/cas/logout', service_validate_url: '/cas/proxyValidate' }}
# Git Hosting congiguration
git_host:
  system: gitolite
  admin_uri: <%= @git_user %>@localhost:gitolite-admin
  base_path: <%= @git_home %>/repositories
  host: <%= @fqdn %> 
  git_user: <%= @git_user %>
  # port: 22

# Git settings
# Use default values unless you understand it
git:
  # Max size of git object like commit, in bytes
  # This value can be increased if you have a very large commits
  git_max_size: 5242880 # 5.megabytes
  # Git timeout to read commit, in seconds
  git_timeout: 10
